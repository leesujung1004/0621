import streamlit as st
import pandas as pd

# ----------------- ì„¤ì • -----------------
st.set_page_config(page_title="ğŸ¥ ë¹µì§‘ ì˜ì—… ìƒíƒœ êµ¬ë¶„ê¸°", layout="wide")
st.title("ğŸ ìš°ë¦¬ ë™ë„¤ ë¹µì§‘, ì˜ì—… ì¤‘ì¸ê°€ìš”?")
st.markdown("GitHubì—ì„œ ë¶ˆëŸ¬ì˜¨ **bakery.csv** íŒŒì¼ì„ ê¸°ë°˜ìœ¼ë¡œ ë¹µì§‘ì˜ ì˜ì—… ìƒíƒœë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.")

# ----------------- ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° -----------------
@st.cache_data
def load_data():
    url = "bakery.csv"
    df = pd.read_csv(url)
    df = df.dropna(subset=["ìƒí˜¸ëª…", "ì˜ì—…ìƒíƒœ"])  # í•„ìˆ˜ ì»¬ëŸ¼ ê²°ì¸¡ ì œê±°
    return df

df = load_data()

# ----------------- ì‚¬ìš©ì í•„í„° ì„ íƒ -----------------
status_filter = st.radio("ğŸ” ì–´ë–¤ ë¹µì§‘ì„ ë³´ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?", ["ì „ì²´ ë³´ê¸°", "ì˜ì—…ì¤‘", "íì—…"])

if status_filter == "ì˜ì—…ì¤‘":
    filtered = df[df["ì˜ì—…ìƒíƒœ"].str.contains("ì˜ì—…", na=False)]
elif status_filter == "íì—…":
    filtered = df[df["ì˜ì—…ìƒíƒœ"].str.contains("íì—…", na=False)]
else:
    filtered = df.copy()

# ----------------- ê²°ê³¼ ì¶œë ¥ -----------------
st.subheader(f"ğŸ“‹ ì´ {len(filtered)}ê°œì˜ ë¹µì§‘ì´ ê²€ìƒ‰ë˜ì—ˆìŠµë‹ˆë‹¤.")

st.dataframe(
    filtered[["ìƒí˜¸ëª…", "ì£¼ì†Œ", "ì˜ì—…ìƒíƒœ", "ì „í™”ë²ˆí˜¸"]].reset_index(drop=True),
    use_container_width=True
)

# ----------------- í†µê³„ ì°¨íŠ¸ -----------------
st.divider()
st.subheader("ğŸ“Š ì˜ì—… ìƒíƒœ í†µê³„")

status_count = df["ì˜ì—…ìƒíƒœ"].value_counts()
st.bar_chart(status_count)
