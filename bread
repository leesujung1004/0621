import streamlit as st
import pandas as pd

# ----------------- ê¸°ë³¸ ì„¤ì • -----------------
st.set_page_config(page_title="ğŸ¥ ë¹µì§‘ ì˜ì—… ìƒíƒœ í™•ì¸ê¸°", layout="wide")
st.title("ğŸ ìš°ë¦¬ ë™ë„¤ ë¹µì§‘, ì•„ì§ ì˜ì—… ì¤‘ì¼ê¹Œ?")
st.markdown("CSV íŒŒì¼ ê¸°ë°˜ìœ¼ë¡œ **ì˜ì—… ì¤‘**ì¸ ë¹µì§‘ê³¼ **íì—…**í•œ ë¹µì§‘ì„ êµ¬ë¶„í•©ë‹ˆë‹¤.")

# ----------------- CSV íŒŒì¼ ë¡œë“œ -----------------
@st.cache_data
def load_data():
    df = pd.read_csv("bakery.csv")
    df = df.dropna(subset=["ìƒí˜¸ëª…", "ì˜ì—…ìƒíƒœ"])  # í•„ìˆ˜ê°’ì´ ì—†ëŠ” í–‰ ì œê±°
    return df

df = load_data()

# ----------------- í•„í„° ì„ íƒ -----------------
status_filter = st.radio("ğŸ” ì–´ë–¤ ë¹µì§‘ì„ ë³¼ê¹Œìš”?", ["ì „ì²´ ë³´ê¸°", "ì˜ì—…ì¤‘", "íì—…"])

if status_filter == "ì˜ì—…ì¤‘":
    filtered = df[df["ì˜ì—…ìƒíƒœ"].str.contains("ì˜ì—…", na=False)]
elif status_filter == "íì—…":
    filtered = df[df["ì˜ì—…ìƒíƒœ"].str.contains("íì—…", na=False)]
else:
    filtered = df.copy()

# ----------------- ë°ì´í„° ì¶œë ¥ -----------------
st.subheader(f"ğŸ“‹ ì¡°íšŒ ê²°ê³¼: {len(filtered)}ê°œ ë¹µì§‘")

st.dataframe(
    filtered[["ìƒí˜¸ëª…", "ì£¼ì†Œ", "ì˜ì—…ìƒíƒœ", "ì „í™”ë²ˆí˜¸"]].reset_index(drop=True),
    use_container_width=True
)

# ----------------- í†µê³„ ì‹œê°í™” -----------------
st.divider()
st.subheader("ğŸ“Š ì˜ì—…/íì—… í†µê³„")
status_count = df["ì˜ì—…ìƒíƒœ"].value_counts()
st.bar_chart(status_count)

